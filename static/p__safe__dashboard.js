(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[6389],{3682:function(O,f,e){"use strict";e.d(f,{Z:function(){return Z}});var d=e(28991),x=e(67294),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM305.8 637.7c3.1 3.1 8.1 3.1 11.3 0l138.3-137.6L583 628.5c3.1 3.1 8.2 3.1 11.3 0l275.4-275.3c3.1-3.1 3.1-8.2 0-11.3l-39.6-39.6a8.03 8.03 0 00-11.3 0l-230 229.9L461.4 404a8.03 8.03 0 00-11.3 0L266.3 586.7a8.03 8.03 0 000 11.3l39.5 39.7z"}}]},name:"line-chart",theme:"outlined"},l=E,j=e(27029),o=function(a,c){return x.createElement(j.Z,(0,d.Z)((0,d.Z)({},a),{},{ref:c,icon:l}))};o.displayName="LineChartOutlined";var Z=x.forwardRef(o)},4954:function(O,f,e){"use strict";e.d(f,{Z:function(){return Z}});var d=e(28991),x=e(67294),E={icon:function(a,c){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z",fill:a}},{tag:"path",attrs:{d:"M184 840h656V184H184v656zm300-496c0-4.4 3.6-8 8-8h184c4.4 0 8 3.6 8 8v48c0 4.4-3.6 8-8 8H492c-4.4 0-8-3.6-8-8v-48zm0 144c0-4.4 3.6-8 8-8h184c4.4 0 8 3.6 8 8v48c0 4.4-3.6 8-8 8H492c-4.4 0-8-3.6-8-8v-48zm0 144c0-4.4 3.6-8 8-8h184c4.4 0 8 3.6 8 8v48c0 4.4-3.6 8-8 8H492c-4.4 0-8-3.6-8-8v-48zM380 328c22.1 0 40 17.9 40 40s-17.9 40-40 40-40-17.9-40-40 17.9-40 40-40zm0 144c22.1 0 40 17.9 40 40s-17.9 40-40 40-40-17.9-40-40 17.9-40 40-40zm0 144c22.1 0 40 17.9 40 40s-17.9 40-40 40-40-17.9-40-40 17.9-40 40-40z",fill:c}},{tag:"path",attrs:{d:"M340 656a40 40 0 1080 0 40 40 0 10-80 0zm0-144a40 40 0 1080 0 40 40 0 10-80 0zm0-144a40 40 0 1080 0 40 40 0 10-80 0zm152 320h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H492c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm0-144h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H492c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm0-144h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H492c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z",fill:a}}]}},name:"profile",theme:"twotone"},l=E,j=e(27029),o=function(a,c){return x.createElement(j.Z,(0,d.Z)((0,d.Z)({},a),{},{ref:c,icon:l}))};o.displayName="ProfileTwoTone";var Z=x.forwardRef(o)},80652:function(O,f,e){"use strict";var d=e(67294),x=e(61273),E=e(23185),l=e(4322),j=e(24770),o=e(89182),Z=function(a,c){var v={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&c.indexOf(n)<0&&(v[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,n=Object.getOwnPropertySymbols(a);h<n.length;h++)c.indexOf(n[h])<0&&Object.prototype.propertyIsEnumerable.call(a,n[h])&&(v[n[h]]=a[n[h]]);return v},s=(0,d.forwardRef)(function(a,c){var v=a.chartRef,n=a.style,h=n===void 0?{height:"inherit"}:n,L=a.className,T=a.loading,C=a.loadingTemplate,y=a.errorTemplate,A=Z(a,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),F=(0,E.Z)(x.x1,A),B=F.chart,W=F.container;return(0,d.useEffect)(function(){(0,l.J)(v,B.current)},[B.current]),(0,d.useImperativeHandle)(c,function(){return{getChart:function(){return B.current}}}),d.createElement(j.Z,{errorTemplate:y},T&&d.createElement(o.Z,{loadingTemplate:C,theme:a.theme}),d.createElement("div",{className:L,style:h,ref:W}))});f.Z=s},90133:function(O,f,e){"use strict";var d=e(28991),x=e(67294),E=e(80652),l=e(85893),j=function(Z){var s=Z.data,a=Z.unit;a=a&&a!=""?a:"";var c={data:s,xField:"time",yField:"value",seriesField:"category",yAxis:{label:{formatter:function(n){return"".concat(n).replace(/\d{1,3}(?=(\d{3})+$)/g,function(h){return"".concat(h,",")})+a}}},slider:{start:0,end:1,trendCfg:{isArea:!0}}};return(0,l.jsx)(E.Z,(0,d.Z)({},c))};f.Z=j},542:function(O,f,e){"use strict";var d=e(28991),x=e(67294),E=e(61273),l=e(63430),j=e(85893),o=function(s){var a=E.G2.getEngine("canvas"),c=s.data,v=s.loading,n=s.height,h={appendPadding:10,data:c,angleField:"value",colorField:"type",radius:.8,label:{type:"spider",labelHeight:40,formatter:function(T,C){var y=new a.Group({});return y.addShape({type:"circle",attrs:{x:0,y:0,width:40,height:50,r:5,fill:C.color}}),y.addShape({type:"text",attrs:{x:10,y:8,text:"".concat(T.type),fill:C.color}}),y.addShape({type:"text",attrs:{x:0,y:25,text:"\u5171".concat(T.value,"\u4E2A\uFF0C\u5360\u6BD4").concat(Math.round((T.percent+Number.EPSILON)*100),"%"),fill:"rgba(0, 0, 0, 0.65)",fontWeight:800}}),y}},interactions:[{type:"pie-legend-active"},{type:"element-active"}]};return(0,j.jsx)(l.Z,(0,d.Z)((0,d.Z)({},h),{},{loading:v,height:n}))};f.Z=o},51015:function(O,f,e){"use strict";e.r(f),e.d(f,{default:function(){return q}});var d=e(66456),x=e(34424),E=e(58024),l=e(39144),j=e(13062),o=e(71230),Z=e(89032),s=e(15746),a=e(34792),c=e(48086),v=e(28481),n=e(67294),h=e(47599),L=e(84619),T=e(3682),C=e(4954),y=e(542),A=e(90133),F=e(28991),B=e(61273),W=e(23185),G=e(4322),V=e(24770),J=e(89182),$=function(u,D){var r={};for(var i in u)Object.prototype.hasOwnProperty.call(u,i)&&D.indexOf(i)<0&&(r[i]=u[i]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,i=Object.getOwnPropertySymbols(u);m<i.length;m++)D.indexOf(i[m])<0&&Object.prototype.propertyIsEnumerable.call(u,i[m])&&(r[i[m]]=u[i[m]]);return r},X=(0,n.forwardRef)(function(u,D){var r=u.chartRef,i=u.style,m=i===void 0?{height:"inherit"}:i,S=u.className,P=u.loading,M=u.loadingTemplate,K=u.errorTemplate,b=$(u,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),z=(0,W.Z)(B.sg,b),I=z.chart,U=z.container;return(0,n.useEffect)(function(){(0,G.J)(r,I.current)},[I.current]),(0,n.useImperativeHandle)(D,function(){return{getChart:function(){return I.current}}}),n.createElement(V.Z,{errorTemplate:K},P&&n.createElement(J.Z,{loadingTemplate:M,theme:u.theme}),n.createElement("div",{className:S,style:m,ref:U}))}),Y=X,t=e(85893),_=function(D){var r=D.data,i=D.unit;i=i&&i!=""?i:"";var m={data:r,isGroup:!0,xField:"time",yField:"value",seriesField:"category",yAxis:{label:{formatter:function(P){return"".concat(P).replace(/\d{1,3}(?=(\d{3})+$)/g,function(M){return"".concat(M,",")})+i}}}};return(0,t.jsx)(Y,(0,F.Z)({},m))},w=_,p=e(46676),R=p.Z.Divider,dt=[{type:"\u5206\u7C7B\u4E00",value:27},{type:"\u5206\u7C7B\u4E8C",value:25},{type:"\u5206\u7C7B\u4E09",value:18},{type:"\u5206\u7C7B\u56DB",value:15},{type:"\u5206\u7C7B\u4E94",value:10},{type:"\u5176\u4ED6",value:5}],q=function(){var u=(0,n.useState)([]),D=(0,v.Z)(u,2),r=D[0],i=D[1],m=(0,n.useState)(!0),S=(0,v.Z)(m,2),P=S[0],M=S[1],K=(0,n.useState)([{type:"noData",value:1}]),b=(0,v.Z)(K,2),z=b[0],I=b[1],U=(0,n.useState)([{type:"noData",value:1}]),N=(0,v.Z)(U,2),k=N[0],tt=N[1],et=(0,n.useState)([{type:"noData",value:1}]),H=(0,v.Z)(et,2),at=H[0],nt=H[1],rt=(0,n.useState)([{type:"noData",value:1}]),Q=(0,v.Z)(rt,2),st=Q[0],it=Q[1];(0,n.useEffect)(function(){try{fetch("/api/v1/safe/dashboard/info").then(function(g){return g.json()}).then(function(g){return console.info(g.data),i(g.data),I(g.data.queryStatusPieDataList),tt(g.data.queryTypePieDataList),nt(g.data.sensitiveDsTypePieDataList),it(g.data.sensitiveTypePieDataList),M(!1)}).catch(function(g){console.log("fetch dashboard data failed",g)})}catch(g){c.ZP.error("get data error. ".concat(g))}},[]);var lt=[{title:"\u62E6\u622A\u539F\u56E0",dataIndex:"result"},{title:"\u6267\u884C\u7C7B\u578B",dataIndex:"sql_type"},{title:"\u7C7B\u578B",dataIndex:"datasource_type"},{title:"\u6570\u636E\u5E93",dataIndex:"database"},{title:"\u7528\u6237",dataIndex:"username"},{title:"\u65E5\u671F",dataIndex:"gmt_created"}],ut=[{title:"\u654F\u611F\u7C7B\u578B",dataIndex:"rule_name"},{title:"\u6E90\u7C7B\u578B",dataIndex:"datasource_type"},{title:"\u6570\u636E\u5E93",dataIndex:"database_name"},{title:"\u6570\u636E\u8868",dataIndex:"table_name"},{title:"\u6570\u636E\u5B57\u6BB5",dataIndex:"column_name"},{title:"\u65E5\u671F",dataIndex:"gmt_created"}];return(0,t.jsxs)(h.ZP,{children:[(0,t.jsx)(o.Z,{gutter:[16,24],style:{marginTop:"10px"},children:(0,t.jsx)(s.Z,{span:24,children:(0,t.jsxs)(p.Z.Group,{children:[(0,t.jsx)(p.Z,{statistic:{title:"\u4ECA\u65E5\u67E5\u8BE2",value:r&&r.todayQueryCount,status:"default"}}),(0,t.jsx)(R,{}),(0,t.jsx)(p.Z,{statistic:{title:"\u67E5\u8BE2\u603B\u6570",value:r&&r.totalQueryCount,status:"success"}}),(0,t.jsx)(R,{}),(0,t.jsx)(p.Z,{statistic:{title:"\u9AD8\u5371\u62E6\u622A",value:r&&r.totalInterceptCount,status:"processing"}}),(0,t.jsx)(R,{}),(0,t.jsx)(p.Z,{statistic:{title:"\u654F\u611F\u6570\u636E\u5E93",value:r&&r.sensitiveDatabaseCount,status:"warning"}}),(0,t.jsx)(p.Z,{statistic:{title:"\u654F\u611F\u6570\u636E\u8868",value:r&&r.sensitiveTableCount,status:"warning"}}),(0,t.jsx)(p.Z,{statistic:{title:"\u654F\u611F\u6570\u636E\u5B57\u6BB5",value:r&&r.sensitiveColumnCount,status:"warning"}}),(0,t.jsx)(R,{}),(0,t.jsx)(p.Z,{statistic:{title:"\u654F\u611F\u6570\u636E\u4FDD\u62A4\u6B21\u6570",value:r&&r.sensitiveQueryCount,status:"processing"}})]})})}),(0,t.jsxs)(o.Z,{gutter:[16,24],style:{marginTop:"15px"},children:[(0,t.jsx)(s.Z,{span:12,children:(0,t.jsx)(l.Z,{title:(0,t.jsxs)("span",{children:[(0,t.jsx)(L.Z,{}),"\xA0SQL\u6267\u884C\u72B6\u6001\u5206\u5E03"]}),bordered:!1,children:(0,t.jsx)(y.Z,{data:z,loading:P,height:330})})}),(0,t.jsx)(s.Z,{span:12,children:(0,t.jsx)(l.Z,{title:(0,t.jsxs)("span",{children:[(0,t.jsx)(L.Z,{}),"\xA0SQL\u6267\u884C\u7C7B\u578B\u5206\u5E03"]}),bordered:!1,children:(0,t.jsx)(y.Z,{data:k,loading:P,height:330})})})]}),(0,t.jsxs)(o.Z,{gutter:[16,24],style:{marginTop:"15px"},children:[(0,t.jsx)(s.Z,{span:12,children:(0,t.jsx)(l.Z,{title:(0,t.jsxs)("span",{children:[(0,t.jsx)(T.Z,{}),"\xA0\u8FD115\u65E5SQL\u67E5\u8BE2\u8D8B\u52BF"]}),bordered:!1,children:r.queryDayLineDataList&&(0,t.jsx)(A.Z,{data:r.query15DayLineDataList,unit:""})})}),(0,t.jsx)(s.Z,{span:12,children:(0,t.jsx)(l.Z,{title:(0,t.jsxs)("span",{children:[(0,t.jsx)(T.Z,{}),"\xA0\u8FD115\u65E5SQL\u62E6\u622A\u8D8B\u52BF"]}),bordered:!1,children:r.query15DayInterceptLineDataList&&(0,t.jsx)(A.Z,{data:r.query15DayInterceptLineDataList,unit:""})})})]}),(0,t.jsx)(o.Z,{gutter:[16,24],style:{marginTop:"15px"},children:(0,t.jsx)(s.Z,{span:24,children:(0,t.jsx)(l.Z,{title:(0,t.jsxs)("span",{children:[(0,t.jsx)(T.Z,{}),"\xA0\u5E74\u5EA6SQL\u67E5\u8BE2\u548C\u98CE\u9669\u62E6\u622A\u7EDF\u8BA1"]}),bordered:!1,children:r.queryMonthBarDataList&&(0,t.jsx)(w,{data:r.queryMonthBarDataList,unit:""})})})}),(0,t.jsxs)(o.Z,{gutter:[16,24],style:{marginTop:"15px"},children:[(0,t.jsx)(s.Z,{span:12,children:(0,t.jsx)(l.Z,{title:(0,t.jsxs)("span",{children:[(0,t.jsx)(L.Z,{}),"\xA0\u654F\u611F\u6570\u636E\u6570\u636E\u6E90\u5206\u5E03"]}),bordered:!1,children:(0,t.jsx)(y.Z,{data:at,loading:P,height:330})})}),(0,t.jsx)(s.Z,{span:12,children:(0,t.jsx)(l.Z,{title:(0,t.jsxs)("span",{children:[(0,t.jsx)(L.Z,{}),"\xA0\u654F\u611F\u6570\u636E\u7C7B\u578B\u5206\u5E03"]}),bordered:!1,children:(0,t.jsx)(y.Z,{data:st,loading:P,height:330})})})]}),(0,t.jsxs)(o.Z,{gutter:[16,24],style:{marginTop:"15px"},children:[(0,t.jsx)(s.Z,{span:12,children:(0,t.jsx)(l.Z,{title:(0,t.jsxs)("span",{children:[(0,t.jsx)(C.Z,{}),"\xA0SQL\u6267\u884C\u6700\u65B0\u62E6\u622A\u8BB0\u5F55"]}),bordered:!1,style:{paddingBottom:"8px"},children:(0,t.jsx)(x.Z,{columns:lt,loading:P,dataSource:r.queryNewInterceptDataList,size:"small",pagination:!1})})}),(0,t.jsx)(s.Z,{span:12,children:(0,t.jsx)(l.Z,{title:(0,t.jsxs)("span",{children:[(0,t.jsx)(C.Z,{}),"\xA0\u654F\u611F\u4FE1\u606F\u6700\u65B0\u63A2\u6D4B\u8BB0\u5F55"]}),bordered:!1,style:{paddingBottom:"8px"},children:(0,t.jsx)(x.Z,{columns:ut,loading:P,dataSource:r.queryNewSensitiveDataList,size:"small",pagination:!1})})})]})]})}}}]);
