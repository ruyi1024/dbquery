(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[7658],{54977:function(G,C,r){"use strict";r.d(C,{Z:function(){return L}});var S=r(28991),E=r(67294),B={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 512h-56c-4.4 0-8 3.6-8 8v320H184V184h320c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V520c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M355.9 534.9L354 653.8c-.1 8.9 7.1 16.2 16 16.2h.4l118-2.9c2-.1 4-.9 5.4-2.3l415.9-415c3.1-3.1 3.1-8.2 0-11.3L785.4 114.3c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-415.8 415a8.3 8.3 0 00-2.3 5.6zm63.5 23.6L779.7 199l45.2 45.1-360.5 359.7-45.7 1.1.7-46.4z"}}]},name:"form",theme:"outlined"},b=B,D=r(27029),j=function(O,P){return E.createElement(D.Z,(0,S.Z)((0,S.Z)({},O),{},{ref:P,icon:b}))};j.displayName="FormOutlined";var L=E.forwardRef(j)},96175:function(G,C,r){"use strict";r.r(C),r.d(C,{default:function(){return me}});var S=r(57663),E=r(71577),B=r(62350),b=r(75443),D=r(48736),j=r(27049),L=r(43358),W=r(34041),O=r(81253),P=r(28481),u=r(55507),Z=r(28991),pe=r(34792),c=r(48086),v=r(92137),N=r(54977),J=r(73171),Q=r(49101),V=r(67294),X=r(47599),T=r(40418),he=r(71194),z=r(77175),n=r(85893),q=function(t){var l=t.modalVisible,e=t.onCancel;return(0,n.jsx)(z.Z,{destroyOnClose:!0,title:"\u65B0\u5EFA",visible:l,onCancel:function(){return e()},footer:null,children:t.children})},_=q,ee=function(t){var l=t.updateModalVisible,e=t.onCancel;return(0,n.jsx)(z.Z,{destroyOnClose:!0,title:"\u4FEE\u6539",visible:l,onCancel:function(){return e()},footer:null,children:t.children})},re=ee,x=r(3140);function te(s){return R.apply(this,arguments)}function R(){return R=(0,v.Z)((0,u.Z)().mark(function s(t){return(0,u.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,x.WY)("/api/v1/sensitive/rule",{params:t}));case 1:case"end":return e.stop()}},s)})),R.apply(this,arguments)}function ae(s){return w.apply(this,arguments)}function w(){return w=(0,v.Z)((0,u.Z)().mark(function s(t){return(0,u.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,x.WY)("/api/v1/sensitive/rule",{method:"DELETE",data:(0,Z.Z)({},t)}));case 1:case"end":return e.stop()}},s)})),w.apply(this,arguments)}function ne(s){return A.apply(this,arguments)}function A(){return A=(0,v.Z)((0,u.Z)().mark(function s(t){return(0,u.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,x.WY)("/api/v1/sensitive/rule",{method:"POST",data:(0,Z.Z)({},t)}));case 1:case"end":return e.stop()}},s)})),A.apply(this,arguments)}function ue(s){return $.apply(this,arguments)}function $(){return $=(0,v.Z)((0,u.Z)().mark(function s(t){return(0,u.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,x.WY)("/api/v1/sensitive/rule",{method:"PUT",data:(0,Z.Z)({},t)}));case 1:case"end":return e.stop()}},s)})),$.apply(this,arguments)}var se=r(85029),le=["type","defaultRender"],ie=function(){var s=(0,v.Z)((0,u.Z)().mark(function t(l){var e;return(0,u.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=c.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),a.prev=1,a.next=4,ne((0,Z.Z)({},l));case 4:return e(),c.ZP.success("\u6DFB\u52A0\u6210\u529F"),a.abrupt("return",!0);case 9:return a.prev=9,a.t0=a.catch(1),e(),c.ZP.error("\u6DFB\u52A0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),a.abrupt("return",!1);case 14:case"end":return a.stop()}},t,null,[[1,9]])}));return function(l){return s.apply(this,arguments)}}(),de=function(){var s=(0,v.Z)((0,u.Z)().mark(function t(l,e){var m;return(0,u.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return m=c.ZP.loading("\u6B63\u5728\u914D\u7F6E"),d.prev=1,d.next=4,ue((0,Z.Z)((0,Z.Z)({},l),{},{task_key:e}));case 4:return m(),c.ZP.success("\u4FEE\u6539\u6210\u529F"),d.abrupt("return",!0);case 9:return d.prev=9,d.t0=d.catch(1),m(),c.ZP.error("\u4FEE\u6539\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),d.abrupt("return",!1);case 14:case"end":return d.stop()}},t,null,[[1,9]])}));return function(l,e){return s.apply(this,arguments)}}(),oe=function(){var s=(0,v.Z)((0,u.Z)().mark(function t(l){var e;return(0,u.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=c.ZP.loading("\u6B63\u5728\u5220\u9664"),a.prev=1,a.next=4,ae({task_key:l});case 4:return e(),c.ZP.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"),a.abrupt("return",!0);case 9:return a.prev=9,a.t0=a.catch(1),e(),c.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),a.abrupt("return",!1);case 14:case"end":return a.stop()}},t,null,[[1,9]])}));return function(l){return s.apply(this,arguments)}}(),Y={rule_type:"",rule_key:"",rule_name:"",rule_express:"",rule_pct:"",level:"",status:"",enable:""},ce=function(){var t=(0,V.useState)(!1),l=(0,P.Z)(t,2),e=l[0],m=l[1],a=(0,V.useState)(!1),d=(0,P.Z)(a,2),fe=d[0],M=d[1],ve=(0,V.useState)(Y),K=(0,P.Z)(ve,2),F=K[0],H=K[1],g=(0,V.useRef)(),k=(0,se.md)(),U=[{title:"\u89C4\u5219",dataIndex:"rule_key",initialValue:F.rule_key,sorter:!0,formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u89C4\u5219\u540D",dataIndex:"rule_name",initialValue:F.rule_name,sorter:!1,formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u89C4\u5219\u7C7B\u578B",dataIndex:"rule_type",filters:!0,onFilter:!0,valueEnum:{data:"\u57FA\u4E8E\u6570\u636E",column:"\u57FA\u4E8E\u5217\u540D"},sorter:!0,search:!1,formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u91C7\u96C6\u8868\u8FBE\u5F0F",dataIndex:"rule_express",initialValue:F.rule_express,sorter:!1,search:!1,hideInTable:!0,formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u91C7\u96C6\u9608\u503C",dataIndex:"rule_pct",initialValue:F.rule_pct,sorter:!1,search:!1,hideInTable:!0,formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u7EA7\u522B",dataIndex:"level",filters:!0,onFilter:!0,valueEnum:{0:{text:"\u4F4E\u654F",status:"warning"},1:{text:"\u9AD8\u654F",status:"error"}},sorter:!0,search:!1,formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u72B6\u6001",dataIndex:"status",filters:!0,onFilter:!0,valueEnum:{"-1":{text:"\u7591\u4F3C\u654F\u611F",status:"warning"},0:{text:"\u975E\u654F\u611F",status:"default"},1:{text:"\u786E\u8BA4\u654F\u611F",status:"success"}},sorter:!0,search:!1,formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u542F\u7528",dataIndex:"enable",filters:!0,onFilter:!0,valueEnum:{0:{text:"\u7981\u7528",status:"Default"},1:{text:"\u542F\u7528",status:"Success"}},sorter:!1,initialValue:F.enable,formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]},renderFormItem:function(p,o,f){var I=o.type,i=o.defaultRender,y=(0,O.Z)(o,le);return(0,n.jsxs)(W.Z,{children:[(0,n.jsx)(Option,{value:0,children:"\u5426"},0),(0,n.jsx)(Option,{value:1,children:"\u662F"},1)]})}},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"gmt_created",sorter:!0,valueType:"dateTime",hideInForm:!0,search:!1},{title:"\u4FEE\u6539\u65F6\u95F4",dataIndex:"gmt_updated",sorter:!0,valueType:"dateTime",hideInForm:!0,search:!1},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(p,o){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("a",{onClick:function(){M(!0),H(o)},children:[(0,n.jsx)(N.Z,{}),"\u4FEE\u6539"]}),(0,n.jsx)(j.Z,{type:"vertical"}),(0,n.jsx)(b.Z,{title:"\u786E\u8BA4\u8981\u5220\u9664\u6570\u636E\u3010".concat(o.task_name,"\u3011,\u5220\u9664\u540E\u4E0D\u53EF\u6062\u590D\uFF0C\u662F\u5426\u7EE7\u7EED\uFF1F"),placement:"left",onConfirm:(0,v.Z)((0,u.Z)().mark(function f(){var I;return(0,u.Z)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(k.canAdmin){y.next=3;break}return c.ZP.error("\u64CD\u4F5C\u6743\u9650\u53D7\u9650\uFF0C\u8BF7\u8054\u7CFB\u5E73\u53F0\u7BA1\u7406\u5458"),y.abrupt("return");case 3:return y.next=5,oe(o.task_key);case 5:I=y.sent,I&&g.current&&g.current.reload();case 7:case"end":return y.stop()}},f)})),children:(0,n.jsxs)("a",{children:[(0,n.jsx)(J.Z,{}),"\u5220\u9664"]})})]})}}];return(0,n.jsxs)(X.ZP,{children:[(0,n.jsx)(T.ZP,{headerTitle:"\u6570\u636E\u5217\u8868",actionRef:g,rowKey:"id",search:!0,toolBarRender:function(){return[(0,n.jsxs)(E.Z,{type:"primary",onClick:function(){m(!0),H(Y)},children:[(0,n.jsx)(Q.Z,{})," \u65B0\u5EFA"]})]},request:function(p,o,f){return te((0,Z.Z)((0,Z.Z)({},p),{},{sorter:o,filter:f}))},columns:U}),(0,n.jsx)(_,{onCancel:function(){return m(!1)},modalVisible:e,children:(0,n.jsx)(T.ZP,{onSubmit:function(){var h=(0,v.Z)((0,u.Z)().mark(function p(o){var f;return(0,u.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(k.canAdmin){i.next=3;break}return c.ZP.error("\u64CD\u4F5C\u6743\u9650\u53D7\u9650\uFF0C\u8BF7\u8054\u7CFB\u5E73\u53F0\u7BA1\u7406\u5458"),i.abrupt("return");case 3:return i.next=5,ie(o);case 5:f=i.sent,f&&(m(!1),g.current&&g.current.reload());case 7:case"end":return i.stop()}},p)}));return function(p){return h.apply(this,arguments)}}(),rowKey:"task_key",type:"form",columns:U})}),(0,n.jsx)(re,{onCancel:function(){return M(!1)},updateModalVisible:fe,children:(0,n.jsx)(T.ZP,{onSubmit:function(){var h=(0,v.Z)((0,u.Z)().mark(function p(o){var f;return(0,u.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(k.canAdmin){i.next=3;break}return c.ZP.error("\u64CD\u4F5C\u6743\u9650\u53D7\u9650\uFF0C\u8BF7\u8054\u7CFB\u5E73\u53F0\u7BA1\u7406\u5458"),i.abrupt("return");case 3:return i.next=5,de(o,F.task_key);case 5:f=i.sent,f&&(M(!1),g.current&&g.current.reload());case 7:case"end":return i.stop()}},p)}));return function(p){return h.apply(this,arguments)}}(),rowKey:"task_key",type:"form",columns:U,pagination:{pageSize:10}})})]})},me=ce}}]);
