(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[66],{54977:function(k,E,t){"use strict";t.d(E,{Z:function(){return H}});var T=t(28991),P=t(67294),L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 512h-56c-4.4 0-8 3.6-8 8v320H184V184h320c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V520c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M355.9 534.9L354 653.8c-.1 8.9 7.1 16.2 16 16.2h.4l118-2.9c2-.1 4-.9 5.4-2.3l415.9-415c3.1-3.1 3.1-8.2 0-11.3L785.4 114.3c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-415.8 415a8.3 8.3 0 00-2.3 5.6zm63.5 23.6L779.7 199l45.2 45.1-360.5 359.7-45.7 1.1.7-46.4z"}}]},name:"form",theme:"outlined"},w=L,z=t(27029),R=function(I,C){return P.createElement(z.Z,(0,T.Z)((0,T.Z)({},I),{},{ref:C,icon:w}))};R.displayName="FormOutlined";var H=P.forwardRef(R)},21039:function(k,E,t){"use strict";t.r(E),t.d(E,{default:function(){return ye}});var T=t(57663),P=t(71577),L=t(62350),w=t(75443),z=t(48736),R=t(27049),H=t(43358),j=t(34041),I=t(81253),C=t(28481),i=t(55507),F=t(28991),xe=t(34792),v=t(48086),b=t(92137),J=t(54977),Q=t(73171),X=t(49101),V=t(67294),q=t(47599),D=t(40418),Ie=t(71194),Y=t(77175),e=t(85893),_=function(n){var d=n.modalVisible,r=n.onCancel;return(0,e.jsx)(Y.Z,{destroyOnClose:!0,title:"\u65B0\u5EFA\u544A\u8B66\u6E20\u9053",visible:d,onCancel:function(){return r()},footer:null,children:n.children})},ee=_,re=function(n){var d=n.updateModalVisible,r=n.onCancel;return(0,e.jsx)(Y.Z,{destroyOnClose:!0,title:"\u4FEE\u6539\u544A\u8B66\u6E20\u9053",visible:d,onCancel:function(){return r()},footer:null,children:n.children})},te=re,S=t(3140);function ae(l){return O.apply(this,arguments)}function O(){return O=(0,b.Z)((0,i.Z)().mark(function l(n){return(0,i.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,S.WY)("/api/v1/alarm/channel",{params:n}));case 1:case"end":return r.stop()}},l)})),O.apply(this,arguments)}function ne(l){return A.apply(this,arguments)}function A(){return A=(0,b.Z)((0,i.Z)().mark(function l(n){return(0,i.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,S.WY)("/api/v1/alarm/channel",{method:"DELETE",data:(0,F.Z)({},n)}));case 1:case"end":return r.stop()}},l)})),A.apply(this,arguments)}function ue(l){return $.apply(this,arguments)}function $(){return $=(0,b.Z)((0,i.Z)().mark(function l(n){return(0,i.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,S.WY)("/api/v1/alarm/channel",{method:"POST",data:(0,F.Z)({},n)}));case 1:case"end":return r.stop()}},l)})),$.apply(this,arguments)}function le(l){return B.apply(this,arguments)}function B(){return B=(0,b.Z)((0,i.Z)().mark(function l(n){return(0,i.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,S.WY)("/api/v1/alarm/channel",{method:"PUT",data:(0,F.Z)({},n)}));case 1:case"end":return r.stop()}},l)})),B.apply(this,arguments)}var se=t(85029),ie=["type","defaultRender"],de=["type","defaultRender"],oe=["type","defaultRender"],ce=["type","defaultRender"],me=["type","defaultRender"],fe=["type","defaultRender"],pe=function(){var l=(0,b.Z)((0,i.Z)().mark(function n(d){var r;return(0,i.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return r=v.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),u.prev=1,u.next=4,ue((0,F.Z)({},d));case 4:return r(),v.ZP.success("\u6DFB\u52A0\u6210\u529F"),u.abrupt("return",!0);case 9:return u.prev=9,u.t0=u.catch(1),r(),v.ZP.error("\u6DFB\u52A0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),u.abrupt("return",!1);case 14:case"end":return u.stop()}},n,null,[[1,9]])}));return function(d){return l.apply(this,arguments)}}(),he=function(){var l=(0,b.Z)((0,i.Z)().mark(function n(d,r){var y;return(0,i.Z)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return y=v.ZP.loading("\u6B63\u5728\u914D\u7F6E"),p.prev=1,p.next=4,le((0,F.Z)((0,F.Z)({},d),{},{id:r}));case 4:return y(),v.ZP.success("\u4FEE\u6539\u6210\u529F"),p.abrupt("return",!0);case 9:return p.prev=9,p.t0=p.catch(1),y(),v.ZP.error("\u4FEE\u6539\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),p.abrupt("return",!1);case 14:case"end":return p.stop()}},n,null,[[1,9]])}));return function(d,r){return l.apply(this,arguments)}}(),ve=function(){var l=(0,b.Z)((0,i.Z)().mark(function n(d){var r;return(0,i.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return r=v.ZP.loading("\u6B63\u5728\u5220\u9664"),u.prev=1,u.next=4,ne({id:d});case 4:return r(),v.ZP.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"),u.abrupt("return",!0);case 9:return u.prev=9,u.t0=u.catch(1),r(),v.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),u.abrupt("return",!1);case 14:case"end":return u.stop()}},n,null,[[1,9]])}));return function(d){return l.apply(this,arguments)}}();function Z(l){return(0,e.jsx)("option",(0,F.Z)((0,F.Z)({},l),{},{children:l.children}))}var K={name:"",description:"",enable:"",webhook_enable:"",webhook_url:"",mail_enable:"",sms_enable:"",phone_enable:"",wechat_enable:"",mail_list:"",sms_list:"",phone_list:"",wechat_list:""},Ze=function(){var n=(0,V.useState)(!1),d=(0,C.Z)(n,2),r=d[0],y=d[1],u=(0,V.useState)(!1),p=(0,C.Z)(u,2),Fe=p[0],M=p[1],be=(0,V.useState)(K),G=(0,C.Z)(be,2),m=G[0],N=G[1],g=(0,V.useRef)(),U=(0,se.md)(),W=[{title:"\u6E20\u9053\u540D\u79F0",dataIndex:"name",hideInForm:!1,sorter:!0,formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]},initialValue:m.name},{title:"\u63CF\u8FF0",dataIndex:"description",valueType:"textarea",search:!1,initialValue:m.description},{title:"\u90AE\u4EF6\u901A\u77E5",dataIndex:"mail_enable",filters:!0,onFilter:!0,valueEnum:{0:{text:"\u5173\u95ED",status:"Default"},1:{text:"\u5F00\u542F",status:"Success"}},sorter:!0,initialValue:m.mail_enable,tip:"\u5F00\u542F\u524D\u8BF7\u5148\u786E\u4FDD\u90AE\u4EF6\u7F51\u5173\u914D\u7F6E\u6B63\u786E\uFF0C\u5426\u5219\u65E0\u6CD5\u6536\u53D6\u90AE\u4EF6",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]},renderFormItem:function(c,a,o){var x=a.type,s=a.defaultRender,h=(0,I.Z)(a,ie);return(0,e.jsxs)(j.Z,{children:[(0,e.jsx)(Z,{value:0,children:"\u5173\u95ED"}),(0,e.jsx)(Z,{value:1,children:"\u5F00\u542F"})]})}},{title:"\u90AE\u4EF6\u5730\u5740",dataIndex:"mail_list",tip:"\u591A\u4E2A\u90AE\u7BB1\u53F7\u4F7F\u7528\u82F1\u6587\u5206\u53F7\u5206\u9694",ellipsis:!0,copyable:!0,initialValue:m.mail_list,hideInTable:!0},{title:"\u77ED\u4FE1\u901A\u77E5",dataIndex:"sms_enable",filters:!0,onFilter:!0,valueEnum:{0:{text:"\u5173\u95ED",status:"Default"},1:{text:"\u5F00\u542F",status:"Success"}},sorter:!0,initialValue:m.sms_enable,tip:"\u5F00\u542F\u524D\u8BF7\u5148\u786E\u4FDD\u963F\u91CC\u4E91\u77ED\u4FE1\u7F51\u5173\u914D\u7F6E\u6B63\u786E\uFF0C\u5426\u5219\u65E0\u6CD5\u6536\u53D6\u77ED\u4FE1",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]},renderFormItem:function(c,a,o){var x=a.type,s=a.defaultRender,h=(0,I.Z)(a,de);return(0,e.jsxs)(j.Z,{children:[(0,e.jsx)(Z,{value:0,children:"\u5173\u95ED"}),(0,e.jsx)(Z,{value:1,children:"\u5F00\u542F"})]})}},{title:"\u77ED\u4FE1\u5730\u5740",dataIndex:"sms_list",tip:"\u591A\u4E2A\u624B\u673A\u53F7\u4F7F\u7528\u82F1\u6587\u5206\u53F7\u5206\u9694",ellipsis:!0,copyable:!0,initialValue:m.sms_list,hideInTable:!0},{title:"\u5FAE\u4FE1\u901A\u77E5",dataIndex:"wechat_enable",filters:!0,onFilter:!0,valueEnum:{0:{text:"\u5173\u95ED",status:"Default"},1:{text:"\u5F00\u542F",status:"Success"}},sorter:!0,initialValue:m.sms_enable,tip:"\u5F00\u542F\u524D\u8BF7\u5148\u786E\u4FDD\u5FAE\u4FE1\u670D\u52A1\u53F7\u914D\u7F6E\u6B63\u786E\uFF0C\u5426\u5219\u65E0\u6CD5\u6536\u53D6\u5FAE\u4FE1\u8BA2\u9605\u901A\u77E5",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]},renderFormItem:function(c,a,o){var x=a.type,s=a.defaultRender,h=(0,I.Z)(a,oe);return(0,e.jsxs)(j.Z,{children:[(0,e.jsx)(Z,{value:0,children:"\u5173\u95ED"}),(0,e.jsx)(Z,{value:1,children:"\u5F00\u542F"})]})}},{title:"\u5FAE\u4FE1\u5730\u5740",dataIndex:"wechat_list",tip:"\u591A\u4E2A\u5FAE\u4FE1\u53F7\u4F7F\u7528\u82F1\u6587\u5206\u53F7\u5206\u9694",ellipsis:!0,copyable:!0,initialValue:m.wechat_list,hideInTable:!0},{title:"\u7535\u8BDD\u901A\u77E5",dataIndex:"phone_enable",filters:!0,onFilter:!0,valueEnum:{0:{text:"\u5173\u95ED",status:"Default"},1:{text:"\u5F00\u542F",status:"Success"}},sorter:!0,initialValue:m.phone_enable,tip:"\u5F00\u542F\u524D\u8BF7\u5148\u786E\u4FDD\u963F\u91CC\u4E91\u7535\u8BDD\u7F51\u5173\u914D\u7F6E\u6B63\u786E\uFF0C\u5426\u5219\u65E0\u6CD5\u63A5\u542C\u7535\u8BDD",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]},renderFormItem:function(c,a,o){var x=a.type,s=a.defaultRender,h=(0,I.Z)(a,ce);return(0,e.jsxs)(j.Z,{children:[(0,e.jsx)(Z,{value:0,children:"\u5173\u95ED"}),(0,e.jsx)(Z,{value:1,children:"\u5F00\u542F"})]})}},{title:"\u7535\u8BDD\u5730\u5740",dataIndex:"phone_list",tip:"\u591A\u4E2A\u624B\u673A\u53F7\u4F7F\u7528\u82F1\u6587\u5206\u53F7\u5206\u9694",ellipsis:!0,copyable:!0,initialValue:m.phone_list,hideInTable:!0},{title:"WebHook\u901A\u77E5",dataIndex:"webhook_enable",filters:!0,onFilter:!0,valueEnum:{0:{text:"\u5173\u95ED",status:"Default"},1:{text:"\u5F00\u542F",status:"Success"}},sorter:!0,initialValue:m.webhook_enable,tip:"\u5F00\u542F\u524D\u8BF7\u5148\u786E\u4FDD\u63A5\u6536\u901A\u77E5\u7684WEBURL\u914D\u7F6E\u6B63\u786E\uFF0C\u5426\u5219\u65E0\u6CD5\u63A5\u6536\u901A\u77E5",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]},renderFormItem:function(c,a,o){var x=a.type,s=a.defaultRender,h=(0,I.Z)(a,me);return(0,e.jsxs)(j.Z,{children:[(0,e.jsx)(Z,{value:0,children:"\u5173\u95ED"}),(0,e.jsx)(Z,{value:1,children:"\u5F00\u542F"})]})}},{title:"WebHook\u5730\u5740",dataIndex:"webhook_url",tip:"\u63A5\u6536POST\u6570\u636E\u7684URL\u5730\u5740",ellipsis:!0,copyable:!0,initialValue:m.webhook_url,hideInTable:!0},{title:"\u72B6\u6001",dataIndex:"enable",filters:!0,onFilter:!0,valueEnum:{0:{text:"\u7981\u7528",status:"Default"},1:{text:"\u542F\u7528",status:"Success"}},sorter:!0,initialValue:m.enable,formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]},renderFormItem:function(c,a,o){var x=a.type,s=a.defaultRender,h=(0,I.Z)(a,fe);return(0,e.jsxs)(j.Z,{children:[(0,e.jsx)(Z,{value:0,children:"\u7981\u7528"}),(0,e.jsx)(Z,{value:1,children:"\u542F\u7528"})]})}},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"gmt_created",sorter:!0,valueType:"dateTime",hideInForm:!0,search:!1},{title:"\u4FEE\u6539\u65F6\u95F4",dataIndex:"gmt_updated",sorter:!0,valueType:"dateTime",hideInForm:!0,search:!1},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(c,a){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("a",{onClick:function(){M(!0),N(a)},children:[(0,e.jsx)(J.Z,{}),"\u4FEE\u6539"]}),(0,e.jsx)(R.Z,{type:"vertical"}),(0,e.jsx)(w.Z,{title:"\u786E\u8BA4\u8981\u5220\u9664\u6570\u636E\u3010".concat(a.name,"\u3011,\u5220\u9664\u540E\u4E0D\u53EF\u6062\u590D\uFF0C\u662F\u5426\u7EE7\u7EED\uFF1F"),placement:"left",onConfirm:(0,b.Z)((0,i.Z)().mark(function o(){var x;return(0,i.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(U.canAdmin){h.next=3;break}return v.ZP.error("\u64CD\u4F5C\u6743\u9650\u53D7\u9650\uFF0C\u8BF7\u8054\u7CFB\u5E73\u53F0\u7BA1\u7406\u5458"),h.abrupt("return");case 3:return h.next=5,ve(a.id);case 5:x=h.sent,x&&g.current&&g.current.reload();case 7:case"end":return h.stop()}},o)})),children:(0,e.jsxs)("a",{children:[(0,e.jsx)(Q.Z,{}),"\u5220\u9664"]})})]})}}];return(0,e.jsxs)(q.ZP,{children:[(0,e.jsx)(D.ZP,{headerTitle:"\u6570\u636E\u5217\u8868",actionRef:g,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[(0,e.jsxs)(P.Z,{type:"primary",onClick:function(){y(!0),N(K)},children:[(0,e.jsx)(X.Z,{})," \u65B0\u5EFA"]})]},request:function(c,a,o){return ae((0,F.Z)((0,F.Z)({},c),{},{sorter:a,filter:o}))},columns:W,pagination:{pageSize:10}}),(0,e.jsx)(ee,{onCancel:function(){return y(!1)},modalVisible:r,children:(0,e.jsx)(D.ZP,{onSubmit:function(){var f=(0,b.Z)((0,i.Z)().mark(function c(a){var o;return(0,i.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(U.canAdmin){s.next=3;break}return v.ZP.error("\u64CD\u4F5C\u6743\u9650\u53D7\u9650\uFF0C\u8BF7\u8054\u7CFB\u5E73\u53F0\u7BA1\u7406\u5458"),s.abrupt("return");case 3:return s.next=5,pe(a);case 5:o=s.sent,o&&(y(!1),g.current&&g.current.reload());case 7:case"end":return s.stop()}},c)}));return function(c){return f.apply(this,arguments)}}(),rowKey:"id",type:"form",columns:W})}),(0,e.jsx)(te,{onCancel:function(){return M(!1)},updateModalVisible:Fe,children:(0,e.jsx)(D.ZP,{onSubmit:function(){var f=(0,b.Z)((0,i.Z)().mark(function c(a){var o;return(0,i.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(U.canAdmin){s.next=3;break}return v.ZP.error("\u64CD\u4F5C\u6743\u9650\u53D7\u9650\uFF0C\u8BF7\u8054\u7CFB\u5E73\u53F0\u7BA1\u7406\u5458"),s.abrupt("return");case 3:return s.next=5,he(a,m.id);case 5:o=s.sent,o&&(M(!1),g.current&&g.current.reload());case 7:case"end":return s.stop()}},c)}));return function(c){return f.apply(this,arguments)}}(),rowKey:"id",type:"form",columns:W})})]})},ye=Ze}}]);
