(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[774],{54977:function(w,b,r){"use strict";r.d(b,{Z:function(){return V}});var k=r(28991),T=r(67294),L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 512h-56c-4.4 0-8 3.6-8 8v320H184V184h320c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V520c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M355.9 534.9L354 653.8c-.1 8.9 7.1 16.2 16 16.2h.4l118-2.9c2-.1 4-.9 5.4-2.3l415.9-415c3.1-3.1 3.1-8.2 0-11.3L785.4 114.3c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-415.8 415a8.3 8.3 0 00-2.3 5.6zm63.5 23.6L779.7 199l45.2 45.1-360.5 359.7-45.7 1.1.7-46.4z"}}]},name:"form",theme:"outlined"},E=L,W=r(27029),H=function(C,s){return T.createElement(W.Z,(0,k.Z)((0,k.Z)({},C),{},{ref:s,icon:E}))},B=T.forwardRef(H),V=B},16894:function(w,b,r){"use strict";var k=r(78775),T=r(36839);b.ZP=T.Z},89906:function(w,b,r){"use strict";r.r(b),r.d(b,{default:function(){return me}});var k=r(57663),T=r(71577),L=r(62350),E=r(24565),W=r(48736),H=r(27049),B=r(43358),V=r(34041),K=r(93224),C=r(2824),s=r(39428),g=r(11849),ve=r(34792),m=r(48086),v=r(3182),J=r(54977),Q=r(73171),X=r(49101),I=r(67294),q=r(67265),O=r(16894),he=r(71194),Y=r(50146),l=r(85029),e=r(85893),_=function(t){var i=t.modalVisible,a=t.onCancel;return(0,e.jsx)(Y.Z,{destroyOnClose:!0,title:(0,e.jsx)(l._H,{id:"pages.searchTable.operate.create"}),visible:i,onCancel:function(){return a()},footer:null,children:t.children})},ee=_,re=function(t){var i=t.updateModalVisible,a=t.onCancel;return(0,e.jsx)(Y.Z,{destroyOnClose:!0,title:(0,e.jsx)(l._H,{id:"pages.searchTable.operate.update"}),visible:i,onCancel:function(){return a()},footer:null,children:t.children})},ae=re,x=r(21704);function te(u){return R.apply(this,arguments)}function R(){return R=(0,v.Z)((0,s.Z)().mark(function u(t){return(0,s.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,x.WY)("/api/v1/task/option",{params:t}));case 1:case"end":return a.stop()}},u)})),R.apply(this,arguments)}function ne(u){return S.apply(this,arguments)}function S(){return S=(0,v.Z)((0,s.Z)().mark(function u(t){return(0,s.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,x.WY)("/api/v1/task/option",{method:"DELETE",data:(0,g.Z)({},t)}));case 1:case"end":return a.stop()}},u)})),S.apply(this,arguments)}function se(u){return M.apply(this,arguments)}function M(){return M=(0,v.Z)((0,s.Z)().mark(function u(t){return(0,s.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,x.WY)("/api/v1/task/option",{method:"POST",data:(0,g.Z)({},t)}));case 1:case"end":return a.stop()}},u)})),M.apply(this,arguments)}function ue(u){return D.apply(this,arguments)}function D(){return D=(0,v.Z)((0,s.Z)().mark(function u(t){return(0,s.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,x.WY)("/api/v1/task/option",{method:"PUT",data:(0,g.Z)({},t)}));case 1:case"end":return a.stop()}},u)})),D.apply(this,arguments)}var le=["type","defaultRender"],ie=function(){var u=(0,v.Z)((0,s.Z)().mark(function t(i){var a;return(0,s.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=m.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),n.prev=1,n.next=4,se((0,g.Z)({},i));case 4:return a(),m.ZP.success("\u6DFB\u52A0\u6210\u529F"),n.abrupt("return",!0);case 9:return n.prev=9,n.t0=n.catch(1),a(),m.ZP.error("\u6DFB\u52A0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),n.abrupt("return",!1);case 14:case"end":return n.stop()}},t,null,[[1,9]])}));return function(i){return u.apply(this,arguments)}}(),oe=function(){var u=(0,v.Z)((0,s.Z)().mark(function t(i,a){var p;return(0,s.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return p=m.ZP.loading("\u6B63\u5728\u914D\u7F6E"),c.prev=1,c.next=4,ue((0,g.Z)((0,g.Z)({},i),{},{task_key:a}));case 4:return p(),m.ZP.success("\u4FEE\u6539\u6210\u529F"),c.abrupt("return",!0);case 9:return c.prev=9,c.t0=c.catch(1),p(),m.ZP.error("\u4FEE\u6539\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),c.abrupt("return",!1);case 14:case"end":return c.stop()}},t,null,[[1,9]])}));return function(i,a){return u.apply(this,arguments)}}(),ce=function(){var u=(0,v.Z)((0,s.Z)().mark(function t(i){var a;return(0,s.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=m.ZP.loading("\u6B63\u5728\u5220\u9664"),n.prev=1,n.next=4,ne({task_key:i});case 4:return a(),m.ZP.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"),n.abrupt("return",!0);case 9:return n.prev=9,n.t0=n.catch(1),a(),m.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),n.abrupt("return",!1);case 14:case"end":return n.stop()}},t,null,[[1,9]])}));return function(i){return u.apply(this,arguments)}}(),z={task_key:"",task_name:"",task_description:"",crontab:"",enable:""},de=function(){var t=(0,I.useState)(!1),i=(0,C.Z)(t,2),a=i[0],p=i[1],n=(0,I.useState)(!1),c=(0,C.Z)(n,2),pe=c[0],A=c[1],fe=(0,I.useState)(z),G=(0,C.Z)(fe,2),P=G[0],N=G[1],j=(0,I.useRef)(),U=(0,l.md)(),$=[{title:(0,e.jsx)(l._H,{id:"pages.searchTable.column.taskKey"}),dataIndex:"task_key",initialValue:P.task_key,sorter:!0,formItemProps:{rules:[{required:!0,message:(0,e.jsx)(l._H,{id:"pages.searchTable.form.requireItem"})}]}},{title:(0,e.jsx)(l._H,{id:"pages.searchTable.column.taskName"}),dataIndex:"task_name",initialValue:P.task_name,sorter:!0,formItemProps:{rules:[{required:!0,message:(0,e.jsx)(l._H,{id:"pages.searchTable.form.requireItem"})}]}},{title:(0,e.jsx)(l._H,{id:"pages.searchTable.column.taskDescription"}),dataIndex:"task_description",initialValue:P.task_description,sorter:!1,search:!1,formItemProps:{rules:[{required:!0,message:(0,e.jsx)(l._H,{id:"pages.searchTable.form.requireItem"})}]}},{title:(0,e.jsx)(l._H,{id:"pages.searchTable.column.crontab"}),dataIndex:"crontab",initialValue:P.crontab,sorter:!1,search:!1},{title:(0,e.jsx)(l._H,{id:"pages.searchTable.column.enable"}),dataIndex:"enable",filters:!0,onFilter:!0,valueEnum:{0:{text:"\u7981\u7528",status:"Default"},1:{text:"\u542F\u7528",status:"Success"}},sorter:!1,initialValue:P.enable,formItemProps:{rules:[{required:!0,message:(0,e.jsx)(l._H,{id:"pages.searchTable.form.requireItem"})}]},renderFormItem:function(h,d,f){var F=d.type,o=d.defaultRender,y=(0,K.Z)(d,le);return(0,e.jsxs)(V.Z,{children:[(0,e.jsx)(Option,{value:0,children:"\u5426"},0),(0,e.jsx)(Option,{value:1,children:"\u662F"},1)]})}},{title:(0,e.jsx)(l._H,{id:"pages.searchTable.column.gmtCreated"}),dataIndex:"gmt_created",sorter:!0,valueType:"dateTime",hideInForm:!0,search:!1},{title:(0,e.jsx)(l._H,{id:"pages.searchTable.column.gmtUpdated"}),dataIndex:"gmt_updated",sorter:!0,valueType:"dateTime",hideInForm:!0,search:!1},{title:(0,e.jsx)(l._H,{id:"pages.searchTable.column.operate"}),dataIndex:"option",valueType:"option",render:function(h,d){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("a",{onClick:function(){A(!0),N(d)},children:[(0,e.jsx)(J.Z,{}),(0,e.jsx)(l._H,{id:"pages.searchTable.operate.edit"})]}),(0,e.jsx)(H.Z,{type:"vertical"}),(0,e.jsx)(E.Z,{title:"\u786E\u8BA4\u8981\u5220\u9664\u6570\u636E\u3010".concat(d.task_name,"\u3011,\u5220\u9664\u540E\u4E0D\u53EF\u6062\u590D\uFF0C\u662F\u5426\u7EE7\u7EED\uFF1F"),placement:"left",onConfirm:(0,v.Z)((0,s.Z)().mark(function f(){var F;return(0,s.Z)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(U.canAdmin){y.next=3;break}return m.ZP.error("\u64CD\u4F5C\u6743\u9650\u53D7\u9650\uFF0C\u8BF7\u8054\u7CFB\u5E73\u53F0\u7BA1\u7406\u5458"),y.abrupt("return");case 3:return y.next=5,ce(d.task_key);case 5:F=y.sent,F&&j.current&&j.current.reload();case 7:case"end":return y.stop()}},f)})),children:(0,e.jsxs)("a",{children:[(0,e.jsx)(Q.Z,{}),(0,e.jsx)(l._H,{id:"pages.searchTable.operate.delete"})]})})]})}}];return(0,e.jsxs)(q.ZP,{children:[(0,e.jsx)(O.ZP,{headerTitle:(0,e.jsx)(l._H,{id:"pages.searchTable.datalist"}),actionRef:j,rowKey:"id",search:!0,toolBarRender:function(){return[(0,e.jsxs)(T.Z,{type:"primary",onClick:function(){p(!0),N(z)},children:[(0,e.jsx)(X.Z,{}),(0,e.jsx)(l._H,{id:"pages.searchTable.operate.create"})]})]},request:function(h,d,f){return te((0,g.Z)((0,g.Z)({},h),{},{sorter:d,filter:f}))},columns:$}),(0,e.jsx)(ee,{onCancel:function(){return p(!1)},modalVisible:a,children:(0,e.jsx)(O.ZP,{onSubmit:function(){var Z=(0,v.Z)((0,s.Z)().mark(function h(d){var f;return(0,s.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(U.canAdmin){o.next=3;break}return m.ZP.error("\u64CD\u4F5C\u6743\u9650\u53D7\u9650\uFF0C\u8BF7\u8054\u7CFB\u5E73\u53F0\u7BA1\u7406\u5458"),o.abrupt("return");case 3:return o.next=5,ie(d);case 5:f=o.sent,f&&(p(!1),j.current&&j.current.reload());case 7:case"end":return o.stop()}},h)}));return function(h){return Z.apply(this,arguments)}}(),rowKey:"task_key",type:"form",columns:$})}),(0,e.jsx)(ae,{onCancel:function(){return A(!1)},updateModalVisible:pe,children:(0,e.jsx)(O.ZP,{onSubmit:function(){var Z=(0,v.Z)((0,s.Z)().mark(function h(d){var f;return(0,s.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(U.canAdmin){o.next=3;break}return m.ZP.error("\u64CD\u4F5C\u6743\u9650\u53D7\u9650\uFF0C\u8BF7\u8054\u7CFB\u5E73\u53F0\u7BA1\u7406\u5458"),o.abrupt("return");case 3:return o.next=5,oe(d,P.task_key);case 5:f=o.sent,f&&(A(!1),j.current&&j.current.reload());case 7:case"end":return o.stop()}},h)}));return function(h){return Z.apply(this,arguments)}}(),rowKey:"task_key",type:"form",columns:$})})]})},me=de}}]);
