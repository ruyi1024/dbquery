(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[53],{42081:function(O){O.exports={container:"container___2XU-J",lang:"lang___3UZBu",content:"content___232he",top:"top___2e5qd",header:"header___1G_uO",logo:"logo___2RIUt",title:"title___3xYCK",desc:"desc___1GQtf",main:"main___oMoRI",icon:"icon___1dSHb",other:"other___3ljbI",register:"register___1vN_i",prefixIcon:"prefixIcon___57iuX"}},17552:function(O,j,e){"use strict";e.r(j);var q=e(34792),v=e(48086),d=e(39428),E=e(11849),p=e(3182),M=e(2824),ee=e(17462),S=e(76772),x=e(89366),Z=e(43593),P=e(67294),A=e(952),I=e(5966),l=e(85029),R=e(73727),K=e(71390),W=e(17778),b=e(81354),g=e.n(b),N=e(42081),r=e.n(N),s=e(85893),F=function(m){var c=m.content;return(0,s.jsx)(S.Z,{style:{marginBottom:24},message:c,type:"error",showIcon:!0})},H=function(){!l.m8||setTimeout(function(){var m=l.m8.location.query,c=m,D=c.redirect;l.m8.push(D||"/")},10)},$=function(){var m=(0,P.useState)(!1),c=(0,M.Z)(m,2),D=c[0],U=c[1],z=(0,P.useState)(!0),L=(0,M.Z)(z,2),G=L[0],Q=L[1],J=(0,P.useState)("account"),C=(0,M.Z)(J,2),y=C[0],se=C[1],T=(0,l.tT)("@@initialState"),f=T.initialState,X=T.setInitialState,h=(0,l.YB)(),Y=function(){var u=(0,p.Z)((0,d.Z)().mark(function _(){var n,a;return(0,d.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,f==null||(n=f.fetchUserInfo)===null||n===void 0?void 0:n.call(f);case 2:a=o.sent,a&&X((0,E.Z)((0,E.Z)({},f),{},{currentUser:a}));case 4:case"end":return o.stop()}},_)}));return function(){return u.apply(this,arguments)}}(),w=function(_,n){var a=_.toString(),i=a.length;return i<n?a=new Array(n-i+1).join("0")+a:i>n&&(a=a.slice(n)),a},V=function(){var u=(0,p.Z)((0,d.Z)().mark(function _(n){var a,i,o;return(0,d.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.info("values:",n),U(!0),t.prev=2,a="1234567890abcdef",a=w(a,16),a=g().enc.Utf8.parse(a),i=g().AES.encrypt(JSON.stringify((0,E.Z)((0,E.Z)({},n),{},{type:y})),a,{iv:a,mode:g().mode.CBC,padding:g().pad.Pkcs7}),console.info("login post..."),t.next=10,(0,W.Q)(i.ciphertext.toString(g().enc.Hex));case 10:if(o=t.sent,console.info("loginState",o),!o.successLogin){t.next=18;break}return v.ZP.success("\u767B\u5F55\u6210\u529F\uFF01"),t.next=16,Y();case 16:return H(),t.abrupt("return");case 18:v.ZP.warning(o.msg),Q(o.success),t.next=25;break;case 22:t.prev=22,t.t0=t.catch(2),v.ZP.error("\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 25:U(!1);case 26:case"end":return t.stop()}},_,null,[[2,22]])}));return function(n){return u.apply(this,arguments)}}(),k="account";return(0,s.jsxs)("div",{className:r().container,children:[(0,s.jsx)("div",{className:r().lang,children:l.pD&&(0,s.jsx)(l.pD,{})}),(0,s.jsxs)("div",{className:r().content,children:[(0,s.jsxs)("div",{className:r().top,children:[(0,s.jsx)("div",{className:r().header,children:(0,s.jsxs)(R.rU,{to:"/",children:[(0,s.jsx)("img",{alt:"logo",className:r().logo,src:"/logo.png"}),(0,s.jsx)("span",{className:r().title,children:"DBQuery"})]})}),(0,s.jsx)("div",{className:r().desc,children:"Make database queries more secure"})]}),(0,s.jsx)("div",{className:r().main,children:(0,s.jsxs)(A.ZP,{initialValues:{autoLogin:!0},submitter:{searchConfig:{submitText:h.formatMessage({id:"pages.login.submit",defaultMessage:"\u767B\u5F55"})},render:function(_,n){return n.pop()},submitButtonProps:{loading:D,size:"large",style:{width:"100%"}}},onFinish:function(){var u=(0,p.Z)((0,d.Z)().mark(function _(n){return(0,d.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:V(n);case 1:case"end":return i.stop()}},_)}));return function(_){return u.apply(this,arguments)}}(),children:[!G&&k==="account"&&(0,s.jsx)(F,{content:"\u8D26\u53F7\u6216\u5BC6\u7801\u9519\u8BEF"}),y==="account"&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(I.Z,{name:"username",fieldProps:{size:"large",prefix:(0,s.jsx)(x.Z,{className:r().prefixIcon})},placeholder:h.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u8BBF\u5BA2\u8D26\u53F7: guest"}),rules:[{required:!0,message:(0,s.jsx)(l._H,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u8D26\u53F7!"})}]}),(0,s.jsx)(I.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,s.jsx)(Z.Z,{className:r().prefixIcon})},placeholder:h.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u8BBF\u5BA2\u5BC6\u7801: guest"}),rules:[{required:!0,message:(0,s.jsx)(l._H,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]})]})})]}),(0,s.jsx)(K.Z,{})]})};j.default=$},42480:function(){}}]);
